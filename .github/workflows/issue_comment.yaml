name: Create a comment on new issues

on:
    issues:
        types: [opened]

jobs:
    comment-with-action:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v3

            - uses: tibdex/github-app-token@v1
              id: generate-token
              with:
                app_id: ${{ secrets.APP_ID }}
                private_key: ${{ secrets.APP_PRIVATE_KEY }}
                
            - name: "dump github context"
              run: echo '${{ toJSON(github.event) }}' | jq
              shell: bash
              
            - name: Create comment
              uses: peter-evans/create-or-update-comment@v3
              with:
                token: ${{ steps.generate-token.outputs.token }}
                issue-number: ${{ github.event.issue.number }}
                body: |
                 This is a multi-line test comment
                 - With GitHub **Markdown** :sparkles:
                 - Created by [create-or-update-comment][1]

                 [1]: https://github.com/peter-evans/create-or-update-comment
                reactions: '+1'

